<%# debug @role_definition  -%>
<%# debug @role  -%>
<%= render :partial => 'new_header' %>
<% form_for(@role, :url => sanction_ui_roles_path) do |form| %>
  <%= form.error_messages %>
  <%= hidden_field_tag 'role_definition', @role_definition.name %>
  <%- ['principal_type','principal_id'].each do |p| -%>
    <%=
    begin
	    render :partial => "new_#{p}", :locals => {:form => form} # OPTIONALLY OVERRIDEN IN APP
	  rescue ActionView::MissingTemplate 
		  render :partial => "new_default_#{p}", :locals => {:form => form}
	  end 
    %>
  <%- end -%>
  <%- unless @role_definition.global? -%>
	  <% ['permissionable_type','permissionable_id'].each do |p| -%>
	    <%=
		  begin
			  render :partial => "new_#{p}", :locals => {:form => form} # OPTIONALLY OVERRIDEN IN APP
			rescue ActionView::MissingTemplate 
				render :partial => "new_default_#{p}", :locals => {:form => form}
			end 
		  %>
	  <%- end -%>
  <%- end -%>
  <%= form.submit "Add" %>
<% end -%>
